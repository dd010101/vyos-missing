// Copyright (C) 2023 VyOS maintainers and contributors
//
// This program is free software; you can redistribute it and/or modify
// in order to easy exprort images built to "external" world
// it under the terms of the GNU General Public License version 2 or later as
// published by the Free Software Foundation.
//
// This program is distributed in the hope that it will be useful,
// but WITHOUT ANY WARRANTY; without even the implied warranty of
// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
// GNU General Public License for more details.
//
// You should have received a copy of the GNU General Public License
// along with this program.  If not, see <http://www.gnu.org/licenses/>.
@NonCPS

// Using a version specifier library, use 'current' branch. The underscore (_)
// is not a typo! You need this underscore if the line immediately after the
// @Library annotation is not an import statement!
@Library('vyos-build@equuleus')_

def pkgList = [
    ['name': "python3-inotify",
     'scmCommit': 'debian/0.2.10-1',
     'scmUrl': 'https://salsa.debian.org/python-team/packages/python-inotify.git',
     'buildCmd': '''pwd=`pwd`

                    # Install dependencies:
                    sudo apt-get update -y && sudo apt-get install -y dejagnu elfutils gdb
                    git clone https://sourceware.org/git/dwz.git
                    cd dwz
                    git checkout 22fe0df89cfff1985bac38d7e322a9aa4052ab70
                    # Taking the debian subdirectory from
                    #   https://sources.debian.org/src/dwz/0.13%2B20210201-1/debian/
                    # so we can use 'dpkg-buildpackage -uc -us -tc -b' .
                    mkdir debian
                    echo 11 > debian/compat
                    echo "U291cmNlOiBkd3oKU2VjdGlvbjogZGV2ZWwKUHJpb3JpdHk6IG9wdGlvbmFsCk1haW50YWluZXI6IERlYmlhbiBHQ0MgTWFpbnRhaW5lcnMgPGRlYmlhbi1nY2NAbGlzdHMuZGViaWFuLm9yZz4KVXBsb2FkZXJzOiBNYXR0aGlhcyBLbG9zZSA8ZG9rb0BkZWJpYW4ub3JnPgpCdWlsZC1EZXBlbmRzOiBkZWJoZWxwZXIgKD49IDExKSwKICBsaWJlbGYtZGV2LAogIGRlamFnbnUgPCFub2NoZWNrPiwKICBlbGZ1dGlscyA8IW5vY2hlY2s+LAogIGdkYiA8IW5vY2hlY2s+LApTdGFuZGFyZHMtVmVyc2lvbjogNC41LjEKSG9tZXBhZ2U6IGh0dHBzOi8vd3d3LnNvdXJjZXdhcmUub3JnL2R3ei8KClBhY2thZ2U6IGR3egpBcmNoaXRlY3R1cmU6IGFueQpNdWx0aS1BcmNoOiBmb3JlaWduCkRlcGVuZHM6ICR7c2hsaWJzOkRlcGVuZHN9LCAke21pc2M6RGVwZW5kc30KRGVzY3JpcHRpb246IERXQVJGIGNvbXByZXNzaW9uIHRvb2wKIERXQVJGIG9wdGltaXplciBhbmQgZHVwbGljYXRpb24gcmVtb3ZhbCB1dGlsaXR5Lgo=" | base64 -d > debian/control
                    echo "IyEvdXNyL2Jpbi9tYWtlIC1mCiMgLSotIG1ha2VmaWxlIC0qLQoKIyBVbmNvbW1lbnQgdGhpcyB0byB0dXJuIG9uIHZlcmJvc2UgbW9kZS4KI2V4cG9ydCBESF9WRVJCT1NFPTEKCkRFQl9CVUlMRF9PUFRJT05TIDo9ICQoREVCX0JVSUxEX09QVElPTlMpIG5vc3RyaXAgbm9vcHQKZXhwb3J0IERFQl9CVUlMRF9PUFRJT05TCgpDRkxBR1MgIDo9ICQoc2hlbGwgZHBrZy1idWlsZGZsYWdzIC0tZ2V0IENQUEZMQUdTOyBkcGtnLWJ1aWxkZmxhZ3MgLS1nZXQgQ0ZMQUdTKQpMREZMQUdTIDo9ICQoc2hlbGwgZHBrZy1idWlsZGZsYWdzIC0tZ2V0IExERkxBR1MpCgolOgoJZGggJEAgLS1wYXJhbGxlbCAtLWJ1aWxkc3lzdGVtPW1ha2VmaWxlIC0tYnVpbGRkaXJlY3Rvcnk9YnVpbGQKCm92ZXJyaWRlX2RoX2F1dG9fY29uZmlndXJlOgoJcm0gLXJmIGJ1aWxkCglta2RpciBidWlsZAoJY2QgYnVpbGQgJiYgLi4vY29uZmlndXJlCgpvdmVycmlkZV9kaF9hdXRvX2J1aWxkOgoJZGhfYXV0b19idWlsZCAtLSBDRkxBR1M9IiQoQ0ZMQUdTKSIgTERGTEFHUz0iJChMREZMQUdTKSIKCm92ZXJyaWRlX2RoX2F1dG9fdGVzdDoKCS1kaF9hdXRvX3Rlc3QK" | base64 -d > debian/rules
                    echo "dmVyc2lvbj0zCmh0dHA6Ly9zb3VyY2V3YXJlLm9yZy9naXQvP3A9ZHd6LmdpdDthPXN1bW1hcnkgLipoPXJlZnMvdGFncy9kd3otKFxkLiopCg==" | base64 -d > debian/watch
                    echo "Rm9ybWF0OiBodHRwOi8vZGVwLmRlYmlhbi5uZXQvZGVwcy9kZXA1ClVwc3RyZWFtLU5hbWU6IGR3egpTb3VyY2U6IGh0dHA6Ly9zb3VyY2V3YXJlLm9yZy9naXQvP3A9ZHd6LmdpdDthPXN1bW1hcnkKCkZpbGVzOiAqCkNvcHlyaWdodDogQ29weXJpZ2h0IChDKSAyMDAxLTIwMTIgUmVkIEhhdCwgSW5jLgogQ29weXJpZ2h0IChDKSAyMDAzIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbiwgSW5jLgpMaWNlbnNlOiBHUEwtMisKIFRoaXMgcHJvZ3JhbSBpcyBmcmVlIHNvZnR3YXJlOyB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IgbW9kaWZ5CiBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieQogdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbjsgZWl0aGVyIHZlcnNpb24gMiwgb3IgKGF0IHlvdXIgb3B0aW9uKQogYW55IGxhdGVyIHZlcnNpb24uCiAuCiBUaGlzIHByb2dyYW0gaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCwKIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mCiBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlCiBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLgogLgogT24gRGViaWFuIHN5c3RlbXMsIHRoZSBjb21wbGV0ZSB0ZXh0IG9mIHRoZSBHTlUgR2VuZXJhbAogUHVibGljIExpY2Vuc2UgdmVyc2lvbiAyIGNhbiBiZSBmb3VuZCBpbiAiL3Vzci9zaGFyZS9jb21tb24tbGljZW5zZXMvR1BMLTIiLgoKRmlsZXM6IGR3YXJmMi4qCkNvcHlyaWdodDogR2FyeSBGdW5jayA8Z2FyeUBpbnRyZXBpZC5jb20+CiBDb3B5cmlnaHQgKEMpIDE5OTIsIDE5OTMsIDE5OTUsIDE5OTYsIDE5OTcsIDE5OTksIDIwMDAsIDIwMDEsIDIwMDIsCiAyMDAzLCAyMDA0LCAyMDA1LCAyMDA2LCAyMDA3LCAyMDA4LCAyMDA5LCAyMDEwLCAyMDExLCAyMDEyCiBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIEluYy4KTGljZW5zZTogR1BMLTMrCiBUaGlzIGZpbGUgaXMgcGFydCBvZiBHQ0MuCiAuCiBHQ0MgaXMgZnJlZSBzb2Z0d2FyZTsgeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeSBpdCB1bmRlcgogdGhlIHRlcm1zIG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnkgdGhlIEZyZWUKIFNvZnR3YXJlIEZvdW5kYXRpb247IGVpdGhlciB2ZXJzaW9uIDMsIG9yIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyCiB2ZXJzaW9uLgogLgogR0NDIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsIGJ1dCBXSVRIT1VUCiBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZiBNRVJDSEFOVEFCSUxJVFkKIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMKIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy4KIC4KIFVuZGVyIFNlY3Rpb24gNyBvZiBHUEwgdmVyc2lvbiAzLCB5b3UgYXJlIGdyYW50ZWQgYWRkaXRpb25hbAogcGVybWlzc2lvbnMgZGVzY3JpYmVkIGluIHRoZSBHQ0MgUnVudGltZSBMaWJyYXJ5IEV4Y2VwdGlvbiwgdmVyc2lvbgogMy4xLCBhcyBwdWJsaXNoZWQgYnkgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbi4KIC4KIE9uIERlYmlhbiBzeXN0ZW1zLCB0aGUgY29tcGxldGUgdGV4dCBvZiB0aGUgR05VIEdlbmVyYWwKIFB1YmxpYyBMaWNlbnNlIHZlcnNpb24gMyBjYW4gYmUgZm91bmQgaW4gIi91c3Ivc2hhcmUvY29tbW9uLWxpY2Vuc2VzL0dQTC0zIi4KCkZpbGVzOiBkd2FyZm5hbWVzLmMKQ29weXJpZ2h0OiBDb3B5cmlnaHQgKEMpIDIwMTIgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBJbmMuCkxpY2Vuc2U6IEdQTC0yKwogVGhpcyBmaWxlIGlzIHBhcnQgb2YgR05VIENDLgogLgogR05VIENDIGlzIGZyZWUgc29mdHdhcmU7IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnkKIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5CiB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uOyBlaXRoZXIgdmVyc2lvbiAyLCBvciAoYXQgeW91ciBvcHRpb24pCiBhbnkgbGF0ZXIgdmVyc2lvbi4KIC4KIEluIGFkZGl0aW9uIHRvIHRoZSBwZXJtaXNzaW9ucyBpbiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UsIHRoZQogRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIGdpdmVzIHlvdSB1bmxpbWl0ZWQgcGVybWlzc2lvbiB0byBsaW5rIHRoZQogY29tcGlsZWQgdmVyc2lvbiBvZiB0aGlzIGZpbGUgaW50byBjb21iaW5hdGlvbnMgd2l0aCBvdGhlciBwcm9ncmFtcywKIGFuZCB0byBkaXN0cmlidXRlIHRob3NlIGNvbWJpbmF0aW9ucyB3aXRob3V0IGFueSByZXN0cmljdGlvbiBjb21pbmcKIGZyb20gdGhlIHVzZSBvZiB0aGlzIGZpbGUuICAoVGhlIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgcmVzdHJpY3Rpb25zCiBkbyBhcHBseSBpbiBvdGhlciByZXNwZWN0czsgZm9yIGV4YW1wbGUsIHRoZXkgY292ZXIgbW9kaWZpY2F0aW9uIG9mCiB0aGUgZmlsZSwgYW5kIGRpc3RyaWJ1dGlvbiB3aGVuIG5vdCBsaW5rZWQgaW50byBhIGNvbWJpbmVkCiBleGVjdXRhYmxlLikKIC4KIEdOVSBDQyBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLAogYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2YKIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGUKIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuCiAuCiBPbiBEZWJpYW4gc3lzdGVtcywgdGhlIGNvbXBsZXRlIHRleHQgb2YgdGhlIEdOVSBHZW5lcmFsCiBQdWJsaWMgTGljZW5zZSB2ZXJzaW9uIDIgY2FuIGJlIGZvdW5kIGluICIvdXNyL3NoYXJlL2NvbW1vbi1saWNlbnNlcy9HUEwtMiIuCgpGaWxlczogaGFzaHRhYi4qCkNvcHlyaWdodDogQ29weXJpZ2h0IChDKSAxOTk5LCAyMDAwLCAyMDAxLCAyMDAyLCAyMDAzLCAyMDA0LCAyMDA5LCAyMDEwCiBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIEluYy4KTGljZW5zZTogTEdQTC0yKwogVGhpcyBmaWxlIGlzIHBhcnQgb2YgdGhlIGxpYmliZXJ0eSBsaWJyYXJ5LgogTGliaWJlcnR5IGlzIGZyZWUgc29mdHdhcmU7IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vcgogbW9kaWZ5IGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIExpYnJhcnkgR2VuZXJhbCBQdWJsaWMKIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5IHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb247IGVpdGhlcgogdmVyc2lvbiAyIG9mIHRoZSBMaWNlbnNlLCBvciAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLgogLgogTGliaWJlcnR5IGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsCiBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZgogTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2VlIHRoZSBHTlUKIExpYnJhcnkgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLgogLgogT24gRGViaWFuIHN5c3RlbXMsIHRoZSBjb21wbGV0ZSB0ZXh0IG9mIHRoZSBHTlUgTGlicmFyeSBHZW5lcmFsCiBQdWJsaWMgTGljZW5zZSB2ZXJzaW9uIDIgY2FuIGJlIGZvdW5kIGluICIvdXNyL3NoYXJlL2NvbW1vbi1saWNlbnNlcy9MR1BMLTIiLgoKRmlsZXM6IHNoYTEuKgpDb3B5cmlnaHQ6IENvcHlyaWdodCAoQykgMjAwMCwgMjAwMSwgMjAwMywgMjAwNCwgMjAwNSwgMjAwNiwgMjAwOAogRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBJbmMuCkxpY2Vuc2U6IEdQTC0yKwogVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU7IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnkgaXQKIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5IHRoZQogRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uOyBlaXRoZXIgdmVyc2lvbiAyLCBvciAoYXQgeW91ciBvcHRpb24pIGFueQogbGF0ZXIgdmVyc2lvbi4KIC4KIFRoaXMgcHJvZ3JhbSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLAogYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2YKIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGUKIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuCiAuCiBPbiBEZWJpYW4gc3lzdGVtcywgdGhlIGNvbXBsZXRlIHRleHQgb2YgdGhlIEdOVSBHZW5lcmFsCiBQdWJsaWMgTGljZW5zZSB2ZXJzaW9uIDIgY2FuIGJlIGZvdW5kIGluICIvdXNyL3NoYXJlL2NvbW1vbi1saWNlbnNlcy9HUEwtMiIuCgpGaWxlczogZGViaWFuLyoKQ29weXJpZ2h0OiAyMDEyIE1hdHRoaWFzIEtsb3NlIDxkb2tvQGRlYmlhbi5vcmc+CkxpY2Vuc2U6IEdQTC0yKwogVGhpcyBwYWNrYWdlIGlzIGZyZWUgc29mdHdhcmU7IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vciBtb2RpZnkKIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5CiB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uOyBlaXRoZXIgdmVyc2lvbiAyIG9mIHRoZSBMaWNlbnNlLCBvcgogKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi4KIC4KIFRoaXMgcGFja2FnZSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLAogYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2YKIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGUKIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuCiAuCiBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZQogYWxvbmcgd2l0aCB0aGlzIHByb2dyYW0uIElmIG5vdCwgc2VlIDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPgogLgogT24gRGViaWFuIHN5c3RlbXMsIHRoZSBjb21wbGV0ZSB0ZXh0IG9mIHRoZSBHTlUgR2VuZXJhbAogUHVibGljIExpY2Vuc2UgdmVyc2lvbiAyIGNhbiBiZSBmb3VuZCBpbiAiL3Vzci9zaGFyZS9jb21tb24tbGljZW5zZXMvR1BMLTIiLgo=" | base64 -d > debian/copyright
                    echo "ZHd6ICgwLjEzKzIwMjEwMjAxLTEpIHVuc3RhYmxlOyB1cmdlbmN5PW1lZGl1bQoKICAqIFNuYXBzaG90IGJ1aWxkLCB0YWtlbiBmcm9tIHRoZSB0cnVuayAyMDIxMDIwMS4KICAgIC0gRml4IGFib3J0aW5nICJ3cml0ZV90eXBlczogQXNzZXJ0aW9uIGByZWYgJiYgcmVmLT5kaWVfZHVwID09IE5VTEwnIi4KICAgIC0gW3Rlc3RzdWl0ZV0gRml4IG1ha2UgY2hlY2sgQ0M9ImdjYyAtbTMyIi4KCiAtLSBNYXR0aGlhcyBLbG9zZSA8ZG9rb0BkZWJpYW4ub3JnPiAgU2F0LCAwNiBGZWIgMjAyMSAxMToyOTo0NSArMDEwMAoKZHd6ICgwLjEzKzIwMjEwMTI2LTEpIHVuc3RhYmxlOyB1cmdlbmN5PW1lZGl1bQoKICAqIFNuYXBzaG90IGJ1aWxkLCB0YWtlbiBmcm9tIHRoZSB0cnVuayAyMDIxMDExOC4KICAgIC0gUFIgZHd6LzI3MjEyLCBQUiBkd3ovMjcyMTMsIGFzc29ydGVkIERXX0ZPUk1faW1wbGljaXRfY29uc3QgZml4ZXMuCiAgICAtIERvbid0IGNyYXNoIG9uIERXQVJGNSAuZGVidWdfbGluZSB0YWJsZSB3aXRoIHplcm8gZmlsZXMuCiAgICAtIEFkZCBESUUgb2Zmc2V0cyBpbiBlcnJvciBtZXNzYWdlcyB0byBtYWtlIGl0IGVhc2llciB0byBmaW5kIHdoYXQKICAgICAgaXMgd3JvbmcuCgogLS0gTWF0dGhpYXMgS2xvc2UgPGRva29AZGViaWFuLm9yZz4gIEZyaSwgMjkgSmFuIDIwMjEgMTc6MTc6MzkgKzAxMDAKCmR3eiAoMC4xMysyMDIxMDExOC0xKSB1bnN0YWJsZTsgdXJnZW5jeT1tZWRpdW0KCiAgKiBTbmFwc2hvdCBidWlsZCwgdGFrZW4gZnJvbSB0aGUgdHJ1bmsgMjAyMTAxMTguCiAgICAtIEZpeCByZWFkaW5nIGFuZCBhZGp1c3Rpbmcgb2YgRFdBUkY1IC5kZWJ1Z19sb2NsaXN0cy4KCiAtLSBNYXR0aGlhcyBLbG9zZSA8ZG9rb0BkZWJpYW4ub3JnPiAgVHVlLCAxOSBKYW4gMjAyMSAwODo1NTo0MyArMDEwMAoKZHd6ICgwLjEzKzIwMjAxMDE1LTIpIHVuc3RhYmxlOyB1cmdlbmN5PW1lZGl1bQoKICAqIEJ1bXAgc3RhbmRhcmRzIHZlcnNpb24uCgogLS0gTWF0dGhpYXMgS2xvc2UgPGRva29AZGViaWFuLm9yZz4gIFN1biwgMDYgRGVjIDIwMjAgMTI6NTY6NDQgKzAxMDAKCmR3eiAoMC4xMysyMDIwMTAxNS0xKSBleHBlcmltZW50YWw7IHVyZ2VuY3k9bWVkaXVtCgogICogU25hcHNob3QgYnVpbGQsIHRha2VuIGZyb20gdGhlIHRydW5rIDIwMjAxMDE1LgoKIC0tIE1hdHRoaWFzIEtsb3NlIDxkb2tvQGRlYmlhbi5vcmc+ICBUaHUsIDE1IE9jdCAyMDIwIDE2OjI5OjI1ICswMjAwCgpkd3ogKDAuMTMrMjAyMDAyMTktMSkgZXhwZXJpbWVudGFsOyB1cmdlbmN5PW1lZGl1bQoKICAqIFNuYXBzaG90IGJ1aWxkLCB0YWtlbiBmcm9tIHRoZSB0cnVuayAyMDIwMDIxOS4KICAqIEJ1bXAgZGViaGVscGVyIGFuZCBzdGFuZGFyZHMgdmVyc2lvbnMuCgogLS0gTWF0dGhpYXMgS2xvc2UgPGRva29AZGViaWFuLm9yZz4gIFR1ZSwgMjEgSnVsIDIwMjAgMTM6MTc6MDEgKzAyMDAKCmR3eiAoMC4xMy0yKSB1bnN0YWJsZTsgdXJnZW5jeT1tZWRpdW0KCiAgKiBBcHBseSB1cGRhdGVzIGZyb20gdGhlIHRydW5rLgogICAgLSBGaXggUFIgMjUwOSwgdGFrZW4gZnJvbSB0aGUgdHJ1bmsuIENsb3NlczogIzk0MjE5My4KICAqIEJ1bXAgc3RhbmRhcmRzIHZlcnNpb24uCgogLS0gTWF0dGhpYXMgS2xvc2UgPGRva29AZGViaWFuLm9yZz4gIFRodSwgMDcgTm92IDIwMTkgMTQ6MDE6NDYgKzAxMDAKCmR3eiAoMC4xMy0xYnVpbGQxKSBlb2FuOyB1cmdlbmN5PW1lZGl1bQoKICAqIFRlc3QgYnVpbGQuCgogLS0gTWF0dGhpYXMgS2xvc2UgPGRva29AdWJ1bnR1LmNvbT4gIFNhdCwgMDcgU2VwIDIwMTkgMTI6NDA6MTkgKzAyMDAKCmR3eiAoMC4xMy0xKSB1bnN0YWJsZTsgdXJnZW5jeT1tZWRpdW0KCiAgKiBkd3ogMC4xMyByZWxlYXNlLgoKIC0tIE1hdHRoaWFzIEtsb3NlIDxkb2tvQGRlYmlhbi5vcmc+ICBTdW4sIDExIEF1ZyAyMDE5IDE3OjIwOjAwICswMjAwCgpkd3ogKDAuMTIuMjAxOTA3MjMtMSkgdW5zdGFibGU7IHVyZ2VuY3k9bWVkaXVtCgogICogTmV3IHVwc3RyZWFtIHNuYXBzaG90LgogICAgLSBQUiAyNDgyMywgTUlQUzogUmVxdWlyZSBzaW5nbGUgcG9pbnRlciBzaXplLgogICAgLSBNYXJrIERXX09QX0dOVV92YXJpYWJsZV92YWx1ZS1yZWZlcmVuY2VkIERJRXMgd2l0aCBkaWVfbm9fbXVsdGlmaWxlLgoKIC0tIE1hdHRoaWFzIEtsb3NlIDxkb2tvQGRlYmlhbi5vcmc+ICBUdWUsIDIzIEp1bCAyMDE5IDE1OjMyOjE3ICswMjAwCgpkd3ogKDAuMTIuMjAxOTA3MTYtMSkgdW5zdGFibGU7IHVyZ2VuY3k9bWVkaXVtCgogICogTmV3IHVwc3RyZWFtIHNuYXBzaG90LgogICAgLSBEb24ndCBleHBlY3Qgc21hbGxlciBleGVjdXRhYmxlIHdoZW4gdXNpbmcgb2JqY29weSBhbmQgZXUtdW5zdHJpcC4KICAgIC0gUmVxdWlyZSBjb21wYXRpYmxlIG9iamNvcHkgYW5kIGV1LXVuc3RyaXAgZm9yIG9iamNvcHktZXUtdW5zdHJpcCouc2guCiAgICAgIENsb3NlczogIzkzMjAxOS4KCiAtLSBNYXR0aGlhcyBLbG9zZSA8ZG9rb0BkZWJpYW4ub3JnPiAgVHVlLCAxNiBKdWwgMjAxOSAxNTo1OTo1MCArMDIwMAoKZHd6ICgwLjEyLjIwMTkwNzExLTEpIHVuc3RhYmxlOyB1cmdlbmN5PW1lZGl1bQoKICAqIE5ldyB1cHN0cmVhbSBzbmFwc2hvdC4KICAgIC0gSWYgLmRlYnVnX2luZm8gc2VjdGlvbiBub3QgcHJlc2VudCwgZXhpdCB3aXRoIDAuCgogLS0gTWF0dGhpYXMgS2xvc2UgPGRva29AZGViaWFuLm9yZz4gIEZyaSwgMTIgSnVsIDIwMTkgMDA6MjU6MjUgKzAyMDAKCmR3eiAoMC4xMi4yMDE5MDcxMC0xKSB1bnN0YWJsZTsgdXJnZW5jeT1tZWRpdW0KCiAgKiBOZXcgdXBzdHJlYW0gc25hcHNob3QuCiAgICAtIEZpeCBQUiBkd3ovMjQ3ODMsIHZlcmlmeV9zZWN0aW9ucyBhc3NlcnQgb24gTUlQUy4KICAqIEJ1bXAgc3RhbmRhcmRzIHZlcnNpb24uCgogLS0gTWF0dGhpYXMgS2xvc2UgPGRva29AZGViaWFuLm9yZz4gIFdlZCwgMTAgSnVsIDIwMTkgMDk6Mjk6NTYgKzAyMDAKCmR3eiAoMC4xMi4yMDE5MDcwNi0xKSB1bnN0YWJsZTsgdXJnZW5jeT1tZWRpdW0KCiAgKiBOZXcgdXBzdHJlYW0gc25hcHNob3QuCgogLS0gTWF0dGhpYXMgS2xvc2UgPGRva29AZGViaWFuLm9yZz4gIFNhdCwgMDYgSnVsIDIwMTkgMTM6NTg6MTUgKzAyMDAKCmR3eiAoMC4xMi4yMDE5MDcwMy0xKSBleHBlcmltZW50YWw7IHVyZ2VuY3k9bWVkaXVtCgogICogTmV3IHVwc3RyZWFtIHNuYXBzaG90LgogICogUmVtb3ZlIHBhdGNoZXMgYXBwbGllZCB1cHN0cmVhbS4KCiAtLSBNYXR0aGlhcyBLbG9zZSA8ZG9rb0BkZWJpYW4ub3JnPiAgV2VkLCAwMyBKdWwgMjAxOSAwOToyODoxMyArMDIwMAoKZHd6ICgwLjEyLjIwMTkwNzAyLTIpIGV4cGVyaW1lbnRhbDsgdXJnZW5jeT1tZWRpdW0KCiAgKiBOZXcgdXBzdHJlYW0gc25hcHNob3QuCiAgKiBGaXggbWFucGFnZSBpbnN0YWxsYXRpb24uCiAgKiBCdW1wIHN0YW5kYXJkcyB2ZXJzaW9uLgogICogQWRkIG1vcmUgdGVzdCBkZXBlbmRlbmNpZXMuCgogLS0gTWF0dGhpYXMgS2xvc2UgPGRva29AZGViaWFuLm9yZz4gIFR1ZSwgMDIgSnVsIDIwMTkgMTA6MTk6MDUgKzAyMDAKCmR3eiAoMC4xMi0zKSB1bnN0YWJsZTsgdXJnZW5jeT1tZWRpdW0KCiAgKiBBZGQgRFdfT1BfR05VX3ZhcmlhYmxlX3ZhbHVlIHN1cHBvcnQgKHRha2VuIGZyb20gdGhlIHRydW5rKS4KICAqIEJ1bXAgc3RhbmRhcmRzIHZlcnNpb24uCgogLS0gTWF0dGhpYXMgS2xvc2UgPGRva29AZGViaWFuLm9yZz4gIFR1ZSwgMTEgRGVjIDIwMTggMTI6MDY6NTIgKzAxMDAKCmR3eiAoMC4xMi0yKSB1bnN0YWJsZTsgdXJnZW5jeT1tZWRpdW0KCiAgKiBNYWtlIHRoZSBwYWNrYWdlIE0tQTogZm9yZWlnbi4KICAqIEJ1bXAgc3RhbmRhcmRzIHZlcnNpb24uCgogLS0gTWF0dGhpYXMgS2xvc2UgPGRva29AZGViaWFuLm9yZz4gIFdlZCwgMjUgT2N0IDIwMTcgMDk6MzM6MTEgKzAyMDAKCmR3eiAoMC4xMi0xKSB1bnN0YWJsZTsgdXJnZW5jeT1tZWRpdW0KCiAgKiBOZXcgdXBzdHJlYW0gdmVyc2lvbi4KCiAtLSBNYXR0aGlhcyBLbG9zZSA8ZG9rb0BkZWJpYW4ub3JnPiAgTW9uLCAxNSBGZWIgMjAxNiAyMDowNjozMiArMDEwMAoKZHd6ICgwLjExLTEpIHVuc3RhYmxlOyB1cmdlbmN5PW1lZGl1bQoKICAqIE5ldyB1cHN0cmVhbSB2ZXJzaW9uLgoKIC0tIE1hdHRoaWFzIEtsb3NlIDxkb2tvQGRlYmlhbi5vcmc+ICBUaHUsIDI3IE1hciAyMDE0IDExOjAxOjU2ICswMTAwCgpkd3ogKDAuMTAtMSkgdW5zdGFibGU7IHVyZ2VuY3k9bG93CgogICogTmV3IHVwc3RyZWFtIHZlcnNpb24uCgogLS0gTWF0dGhpYXMgS2xvc2UgPGRva29AZGViaWFuLm9yZz4gIFNhdCwgMTEgTWF5IDIwMTMgMTY6NDA6NTUgKzAyMDAKCmR3eiAoMC44LTEpIHVuc3RhYmxlOyB1cmdlbmN5PWxvdwoKICAqIE5ldyB1cHN0cmVhbSB2ZXJzaW9uLgoKIC0tIE1hdHRoaWFzIEtsb3NlIDxkb2tvQGRlYmlhbi5vcmc+ICBTdW4sIDI3IEphbiAyMDEzIDIxOjQ0OjE4ICswMTAwCgpkd3ogKDAuNC0xKSB1bnN0YWJsZTsgdXJnZW5jeT1sb3cKCiAgKiBJbml0aWFsIHJlbGVhc2UuCgogLS0gTWF0dGhpYXMgS2xvc2UgPGRva29AZGViaWFuLm9yZz4gIE1vbiwgMjUgSnVuIDIwMTIgMTE6NDQ6NTMgKzAyMDAK" | base64 -d > debian/changelog
                    dpkg-buildpackage -uc -us -tc -b
                    cd ..
                    sudo dpkg -i *.deb && rm -f *.deb

                    git clone https://salsa.debian.org/debian/debhelper.git
                    cd debhelper
                    git checkout buster-backports
                    dpkg-buildpackage -uc -us -tc -b
                    cd ..
                    sudo dpkg -i *.deb && rm -f *.deb

                    cd "$pwd"
                    export DEB_BUILD_OPTIONS=nocheck
                    dpkg-buildpackage -uc -us -tc -b'''],
]

// Start package build using library function from https://github.com/vyos/vyos-build
buildPackage('python3-inotify', pkgList, null, "**/packages/python3-inotify/**")
